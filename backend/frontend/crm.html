<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CRM | Elise Care Home Entertainment</title>
    <link rel="stylesheet" href="/css/styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;600;700&family=Open+Sans:wght@300;400;500;600&display=swap"
        rel="stylesheet">
</head>

<body class="crm-page">
    <!-- Login Screen -->
    <div id="loginScreen" class="login-screen">
        <div class="login-box">
            <h1>Elise's Diary</h1>
            <p>Enter your password to access the Diary</p>
            <form id="loginForm">
                <div class="form-group">
                    <input type="password" id="password" placeholder="Password" required>
                </div>
                <button type="submit" class="btn btn-primary btn-full">Login</button>
                <p id="loginError" class="error-message"></p>
            </form>
            <a href="/" class="back-link">‚Üê Back to Website</a>
        </div>
    </div>

    <!-- CRM Dashboard (hidden until logged in) -->
    <div id="crmApp" class="crm-app" style="display: none;">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <h2>Elise's Diary</h2>
            </div>
            <nav class="sidebar-nav">
                <a href="#" class="nav-item active" data-section="dashboard">
                    <span class="nav-icon">üìä</span>
                    Dashboard
                </a>
                <a href="#" class="nav-item" data-section="calendar">
                    <span class="nav-icon">üóìÔ∏è</span>
                    Calendar
                </a>
                <a href="#" class="nav-item" data-section="contacts">
                    <span class="nav-icon">üë•</span>
                    Contacts
                </a>
                <a href="#" class="nav-item" data-section="callbacks">
                    <span class="nav-icon">üîî</span>
                    Callbacks
                </a>
                <a href="#" class="nav-item" data-section="bookings">
                    <span class="nav-icon">üìÖ</span>
                    Bookings
                </a>
            </nav>
            <div class="sidebar-footer">
                <a href="/" class="nav-item">
                    <span class="nav-icon">üè†</span>
                    View Website
                </a>
                <a href="#" class="nav-item" id="logoutBtn">
                    <span class="nav-icon">üö™</span>
                    Logout
                </a>
            </div>
        </aside>

        <!-- Mobile Header -->
        <header class="mobile-header">
            <button class="menu-toggle" id="menuToggle">‚ò∞</button>
            <h1>Elise Diary</h1>
            <button class="mobile-logout" id="mobileLogout">Logout</button>
        </header>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Dashboard Section -->
            <section id="dashboard" class="content-section active">
                <div class="section-header">
                    <h1>Dashboard</h1>
                </div>
                <div class="stats-grid">
                    <div class="stat-card clickable" onclick="navigateToSection('contacts')">
                        <div class="stat-icon">üë•</div>
                        <div class="stat-info">
                            <span class="stat-value" id="statContacts">0</span>
                            <span class="stat-label">Total Contacts</span>
                        </div>
                    </div>
                    <div class="stat-card clickable" onclick="navigateToSection('calendar')">
                        <div class="stat-icon">üìÖ</div>
                        <div class="stat-info">
                            <span class="stat-value" id="statUpcoming">0</span>
                            <span class="stat-label">Upcoming Bookings</span>
                        </div>
                    </div>
                    <div class="stat-card warning clickable" onclick="navigateToCallbacks('awaiting')">
                        <div class="stat-icon">üîî</div>
                        <div class="stat-info">
                            <span class="stat-value" id="statAwaitingCallback">0</span>
                            <span class="stat-label">Awaiting Callback</span>
                        </div>
                    </div>
                    <div class="stat-card info clickable" onclick="navigateToCallbacks('tocall')">
                        <div class="stat-icon">üìû</div>
                        <div class="stat-info">
                            <span class="stat-value" id="statToCallBack">0</span>
                            <span class="stat-label">To Call Back</span>
                        </div>
                    </div>
                    <div class="stat-card danger clickable" onclick="navigateToBookings('Unpaid')">
                        <div class="stat-icon">üí∞</div>
                        <div class="stat-info">
                            <span class="stat-value" id="statUnpaid">0</span>
                            <span class="stat-label">Unpaid Bookings</span>
                        </div>
                    </div>
                    <div class="stat-card clickable" onclick="navigateToBookings('Invoiced')">
                        <div class="stat-icon">üìÑ</div>
                        <div class="stat-info">
                            <span class="stat-value" id="statInvoiced">0</span>
                            <span class="stat-label">Invoiced</span>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Contacts Section -->
            <section id="contacts" class="content-section">
                <div class="section-header">
                    <h1>Contacts</h1>
                    <button class="btn btn-primary" onclick="openModal('contactModal')">+ Add Contact</button>
                </div>

                <div class="search-bar">
                    <input type="text" id="contactSearch" placeholder="Search contacts..." oninput="filterContacts()">
                </div>
                <div class="table-container">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Care Home</th>
                                <th>Contact Person</th>
                                <th>Telephone</th>
                                <th>Email</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="contactsTable">
                            <!-- Populated by JavaScript -->
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- Callbacks Section -->
            <section id="callbacks" class="content-section">
                <div class="section-header">
                    <h1>Calls</h1>
                    <button class="btn btn-primary" onclick="openModal('callbackModal')">+ Add Callback</button>
                </div>

                <div class="callback-tabs">
                    <button class="tab-btn active" data-tab="awaiting">Awaiting Callback</button>
                    <button class="tab-btn" data-tab="tocall">To Call Back</button>
                </div>

                <div class="table-container">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Contact</th>
                                <th>Original Call</th>
                                <th>Callback Date</th>
                                <th>Notes</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="callbacksTable">
                            <!-- Populated by JavaScript -->
                        </tbody>
                    </table>
                </div>
            </section>
            <!-- Calendar Section -->
            <section id="calendar" class="content-section">
                <div class="section-header">
                    <h1>Calendar</h1>
                </div>
                <div class="calendar-container">
                    <div class="calendar-header">
                        <button class="btn btn-secondary" id="prevMonth">‚Üê Previous</button>
                        <h2 id="currentMonth">December 2025</h2>
                        <button class="btn btn-secondary" id="nextMonth">Next ‚Üí</button>
                    </div>
                    <table class="calendar-table">
                        <thead>
                            <tr>
                                <th>Sun</th>
                                <th>Mon</th>
                                <th>Tue</th>
                                <th>Wed</th>
                                <th>Thu</th>
                                <th>Fri</th>
                                <th>Sat</th>
                            </tr>
                        </thead>
                        <tbody id="calendarBody">
                            <!-- Day populated by JavaScript -->
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- Booking Details Modal -->
            <div id="bookingDetailsModal" class="modal">
                <div class="modal-content modal-small">
                    <div class="modal-header">
                        <h2>Booking Details</h2>
                        <button class="modal-close" onclick="closeModal('bookingDetailsModal')">&times;</button>
                    </div>
                    <div id="bookingDetailsContent">
                        <!-- Populated by JavaScript -->
                    </div>
                    <div class="form-actions">
                        <button type="button" class="btn btn-secondary"
                            onclick="closeModal('bookingDetailsModal')">Close</button>
                        <button type="button" class="btn btn-primary" id="editBookingBtn">Edit Booking</button>
                    </div>
                </div>
            </div>
            <!-- Bookings Section -->
            <section id="bookings" class="content-section">
                <div class="section-header">
                    <h1>Bookings</h1>
                    <button class="btn btn-primary" onclick="openModal('bookingModal')">+ Add Booking</button>
                </div>

                <div class="filter-bar">
                    <label>Filter by status:</label>
                    <select id="bookingStatusFilter">
                        <option value="">All</option>
                        <option value="Unpaid">Unpaid</option>
                        <option value="Invoiced">Invoiced</option>
                        <option value="Paid">Paid</option>
                    </select>
                </div>

                <div class="table-container">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Date/Time</th>
                                <th>Venue</th>
                                <th>Type</th>
                                <th>Fee Agreed</th>
                                <th>Status</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="bookingsTable">
                            <!-- Populated by JavaScript -->
                        </tbody>
                    </table>
                </div>
            </section>
        </main>
    </div>

    <!-- Contact Details Modal -->
    <div id="contactDetailsModal" class="modal">
        <div class="modal-content modal-small">
            <div class="modal-header">
                <h2>Contact Details</h2>
                <button class="modal-close" onclick="closeModal('contactDetailsModal')">&times;</button>
            </div>
            <div id="contactDetailsContent">
                <!-- Populated by JavaScript -->
            </div>
            <div class="form-actions">
                <button type="button" class="btn btn-secondary"
                    onclick="closeModal('contactDetailsModal')">Close</button>
                <button type="button" class="btn btn-primary" id="editContactBtn">Edit Contact</button>
            </div>
        </div>
    </div>

    <!-- Contact Modal -->
    <div id="contactModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="contactModalTitle">Add Contact</h2>
                <button class="modal-close" onclick="closeModal('contactModal')">&times;</button>
            </div>
            <form id="contactForm">
                <input type="hidden" id="contactId">
                <div class="form-group">
                    <label for="careHomeName">Care Home Name *</label>
                    <input type="text" id="careHomeName" required>
                </div>
                <div class="form-group">
                    <label for="contactPerson">Contact Person</label>
                    <input type="text" id="contactPerson">
                </div>
                <div class="form-group">
                    <label for="telephone">Telephone</label>
                    <input type="tel" id="telephone">
                </div>
                <div class="form-group">
                    <label for="contactEmail">Email</label>
                    <input type="email" id="contactEmail">
                </div>
                <div class="form-group">
                    <label for="contactAddress">Address</label>
                    <textarea id="contactAddress" rows="2"></textarea>
                </div>
                <div class="form-group">
                    <label for="contactPostcode">Postcode</label>
                    <input type="text" id="contactPostcode">
                </div>
                <div class="form-group">
                    <label for="contactWebsite">Website</label>
                    <input type="url" id="contactWebsite" placeholder="https://example.com">
                </div>
                <div class="form-actions">
                    <button type="button" class="btn btn-secondary" onclick="closeModal('contactModal')">Cancel</button>
                    <button type="submit" class="btn btn-primary">Save Contact</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Callback Modal -->
    <div id="callbackModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="callbackModalTitle">Add Callback</h2>
                <button class="modal-close" onclick="closeModal('callbackModal')">&times;</button>
            </div>
            <form id="callbackForm">
                <input type="hidden" id="callbackId">
                <div class="form-group">
                    <label for="callbackContact">Contact *</label>
                    <select id="callbackContact" required>
                        <!-- Populated by JavaScript -->
                    </select>
                </div>
                <div class="form-group">
                    <label for="callbackType">Callback Type *</label>
                    <select id="callbackType" required>
                        <option value="Awaiting Callback">Awaiting Callback</option>
                        <option value="To Call Back">To Call Back</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="originalCallDateTime">Original Call Date/Time *</label>
                    <input type="datetime-local" id="originalCallDateTime" required>
                </div>
                <div class="form-group">
                    <label for="callbackDateTime">Callback Date/Time *</label>
                    <input type="datetime-local" id="callbackDateTime" required>
                </div>
                <div class="form-group">
                    <label for="callbackNotes">Notes</label>
                    <textarea id="callbackNotes" rows="4"></textarea>
                </div>
                <div class="form-actions">
                    <button type="button" class="btn btn-secondary"
                        onclick="closeModal('callbackModal')">Cancel</button>
                    <button type="submit" class="btn btn-primary">Save Callback</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Booking Modal -->
    <div id="bookingModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="bookingModalTitle">Add Booking</h2>
                <button class="modal-close" onclick="closeModal('bookingModal')">&times;</button>
            </div>
            <form id="bookingForm">
                <input type="hidden" id="bookingId">
                <div class="form-group">
                    <label for="bookingContact">Care Home *</label>
                    <select id="bookingContact" required>
                        <!-- Populated by JavaScript -->
                    </select>
                </div>
                <div class="form-group">
                    <label for="bookingDate">Date *</label>
                    <input type="date" id="bookingDate" required>
                </div>
                <div class="form-group">
                    <label>From *</label>
                    <div class="time-select-group">
                        <select id="bookingFromHour" required>
                            <option value="">Hour</option>
                            <option value="09">09</option>
                            <option value="10">10</option>
                            <option value="11">11</option>
                            <option value="12">12</option>
                            <option value="13">13</option>
                            <option value="14">14</option>
                            <option value="15">15</option>
                            <option value="16">16</option>
                            <option value="17">17</option>
                            <option value="18">18</option>
                            <option value="19">19</option>
                            <option value="20">20</option>
                            <option value="21">21</option>
                        </select>
                        <span>:</span>
                        <select id="bookingFromMinute" required>
                            <option value="">Min</option>
                            <option value="00">00</option>
                            <option value="15">15</option>
                            <option value="30">30</option>
                            <option value="45">45</option>
                        </select>
                    </div>
                </div>
                <div class="form-group">
                    <label>To *</label>
                    <div class="time-select-group">
                        <select id="bookingToHour" required>
                            <option value="">Hour</option>
                            <option value="09">09</option>
                            <option value="10">10</option>
                            <option value="11">11</option>
                            <option value="12">12</option>
                            <option value="13">13</option>
                            <option value="14">14</option>
                            <option value="15">15</option>
                            <option value="16">16</option>
                            <option value="17">17</option>
                            <option value="18">18</option>
                            <option value="19">19</option>
                            <option value="20">20</option>
                            <option value="21">21</option>
                        </select>
                        <span>:</span>
                        <select id="bookingToMinute" required>
                            <option value="">Min</option>
                            <option value="00">00</option>
                            <option value="15">15</option>
                            <option value="30">30</option>
                            <option value="45">45</option>
                        </select>
                    </div>
                </div>
                <div class="form-group">
                    <label for="bookingType">Type of Booking</label>
                    <textarea id="bookingType" rows="2"
                        placeholder="e.g., Christmas songs, ABBA night, etc."></textarea>
                </div>
                <div class="form-group">
                    <label for="bookingMoreInfo">More Info</label>
                    <textarea id="bookingMoreInfo" rows="3"
                        placeholder="Any additional information about this booking..."></textarea>
                </div>
                <div class="form-group">
                    <label for="feeAgreed">Fee Agreed (¬£)</label>
                    <input type="number" id="feeAgreed" step="0.01" min="0">
                </div>
                <div class="form-group">
                    <label for="feeStatus">Fee Status *</label>
                    <select id="feeStatus" required>
                        <option value="Unpaid">Unpaid</option>
                        <option value="Invoiced">Invoiced</option>
                        <option value="Paid">Paid</option>
                    </select>
                </div>
                <div class="form-actions">
                    <button type="button" class="btn btn-secondary" onclick="closeModal('bookingModal')">Cancel</button>
                    <button type="submit" class="btn btn-primary">Save Booking</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Delete Confirmation Modal -->
    <div id="deleteModal" class="modal">
        <div class="modal-content modal-small">
            <div class="modal-header">
                <h2>Confirm Delete</h2>
                <button class="modal-close" onclick="closeModal('deleteModal')">&times;</button>
            </div>
            <p>Are you sure you want to delete this item? This action cannot be undone.</p>
            <div class="form-actions">
                <button type="button" class="btn btn-secondary" onclick="closeModal('deleteModal')">Cancel</button>
                <button type="button" class="btn btn-danger" id="confirmDeleteBtn">Delete</button>
            </div>
        </div>
    </div>

    <script src="/js/crm.js"></script>
</body>

</html>